<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>BOTW - All Main Categories Leaderboard</title>
  <link rel="icon" type="image/png" href="main.png">
  <link rel="stylesheet" href="style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<div id="loading-bar-container"><div id="loading-bar"></div></div>
<h1>Breath Of The Wild</h1>
<h2>All Main Categories - Leaderboard</H2>
<div id="credit">by Echecetdame & Ram (Thx AI for the JS lul)</div>
<div id="count"></div>
<input id="search" type="text" placeholder="Search for a player…">

<button id="rankInfoBtn">How Rank (%) is Calculated</button>
<div id="rankInfoText">
  <p><b>Rank (%)</b> measures a player's overall performance across all categories. It compares the player's <b>Personal Best (PB)</b> with the <b>World Record (WR)</b> in each category, weighted by the number of runners.</p>

  <p><b>Categories played:</b></p>
  <pre>
expComponent_i = exp((WR_i / PB_i) - 1)
weighted_i = R_total_i × expComponent_i
  </pre>
  <ul>
    <li><b>WR_i</b> = current World Record in category i</li>
    <li><b>PB_i</b> = player's Personal Best in category i</li>
    <li><b>R_total_i</b> = number of runners in category i</li>
  </ul>

  <p><b>Handling categories not played:</b></p>
  <pre>
PB_not_played_i = WR_i × penalty_i

penalty_i = (R_total_total / Σ_{j∈played} R_total_j) ×
            (Σ_{j∈played} (R_total_j × (WR_j / PB_j))) / (Σ_{j∈played} R_total_j)
  </pre>
  <ul>
    <li>R_total_total = total runners across all categories (players counted multiple times if run multiple categories)</li>
    <li>Σ_{j∈played} R_total_j = sum of runners in categories the player has run</li>
    <li>WR_j / PB_j = ratio of WR to PB in played category j</li>
    <li>PB_not_played_i = pseudo-PB assigned for category not played</li>
  </ul>

  <p><b>Full formula:</b></p>
  <pre>
Rank% = 100 × (Σ_i weight_i × exp((WR_i / PB_i_effective) - 1)) / Σ_i weight_i

Where PB_i_effective = PB_i if played, or PB_not_played_i if not played
  </pre>

  <p>This system rewards players who are versatile, slightly penalizes skipped categories, and dynamically adapts to changes in WRs or runner numbers.</p>
</div>
<p></p>
<table>
  <thead>
    <tr>
      <th class="non-clickable">Rank</th>
      <th class="non-clickable">Player</th>
      <th class="non-clickable">Compare</th>
      <th>Any%</th>
      <th>All Dungeons</th>
      <th>All Main Quests</th>
      <th>All Shrines</th>
      <th>100%</th>
      <th>Best Ending</th>
      <th>Master Sword</th>
      <th>Master Sword Restricted</th>
      <th>Master Sword & Dungeons</th>
      <th>Great Plateau Any%</th>
      <th>Great Plateau 100%</th>
      <th class="non-clickable">Rank (%)</th>
    </tr>
  </thead>
  <tbody id="list"></tbody>
</table>
<div id="compare-tray">
  <div id="compare-slots">
    <div class="slot" id="slot-1"><span>Player 1</span></div>
    <div class="slot" id="slot-2"><span>Player 2</span></div>
    <div class="slot" id="slot-3"><span>Player 3</span></div>
    <div class="slot" id="slot-4"><span>Player 4</span></div>
  </div>
  <div id="compare-controls">
    <button id="compare-run-btn" class="disabled" disabled>Compare (0)</button>
    <button id="compare-clear-btn">Clear</button>
  </div>
</div>
<div id="compare-modal-backdrop">
  <div id="compare-modal-content">
    <button id="compare-modal-close">&times;</button>
    <h2>Player Comparison</h2>
    <div id="compare-modal-body">
      </div>
  </div>
</div>
<script src="main.js"></script>
</body>
</html>
